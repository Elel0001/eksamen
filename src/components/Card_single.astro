---
import "../styles/general.css";
import Button from "./Button.astro";
import OverskriftWithUnderline from "../components/OverskriftWithUnderline.astro";

const { name, pris, texts1, texts2, texts3, texts4, imgsingle, imgsingle2 } = Astro.props;
---

<article>
  <!--  <div class="container_single">
    <div class="column_picture">
      <div class="carousel">
        <div class="img_single">
          <img src={imgsingle} alt="" />
          <img src={imgsingle2} alt="" />
        </div>
        <button class="prev"></button>
        <button class="next"></button>
      </div>
    </div> -->
  <div class="test_grid">
    <div class="container">
      <img src=`/img/produkter/${imgsingle}` alt="billede af smykker" />
    </div>
    <div class="column_text">
      <div class="h1">
        <OverskriftWithUnderline overskrift={name} />
      </div>

      <h2 class="h3">{pris} kr.</h2>

      <p>{texts1}</p>
      <p>{texts2}</p>
      <p>{texts3}</p>
      <p>Varenummer: {texts4}</p>
      <div class="botton_single">
        <Button size="large">Book en aftale</Button>
      </div>

      <div class="del">
        <div class="del_ikon">
          <img src="/icons/del_desk.svg" alt="Del knap" />
        </div>
        <p class="del_text">Del</p>
      </div>
    </div>
  </div>
  <style>
    /*Chatgpt og hjælp fra tutor start */
    .carousel {
      position: relative;
      overflow: hidden;
      width: 100%;
      height: auto;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .img_single {
      display: flex;
      transition: transform 0.5s ease-in-out;
      /* width: 100%; */
      height: auto;
      border: 1px solid red;
      overflow: hidden;
    }

    .carousel img {
      min-width: 100%;
      height: auto;
      object-fit: cover;
      margin: auto;
    }

    .carousel .prev {
      left: 6%;
      background-image: url("/icons/pilv.svg");
    }

    .carousel .next {
      right: 0%;
      background-image: url("/icons/pilh.svg");
    }

    /*Chatgpt og hjælp fra tutor slut */

    .carousel button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      height: 50px;
      width: 50px;
      background-repeat: no-repeat;
      background-color: transparent;
      object-fit: cover;
      border: none;
      cursor: pointer;
    }

    .botton_single {
      margin-bottom: var(--spacing_6);
    }
    .del_ikon {
      width: 80%;
      text-align: left;
    }
    .del {
      display: grid;
      grid-template-columns: 1fr 10fr;
      gap: var(--spacing_1);
      margin-bottom: var(--spacing_6);
    }

    .del_text {
      margin-top: var(--spacing_3);
    }
    p {
      margin-bottom: var(--spacing_4);
    }

    .h1 {
      margin-top: var(--spacing_4);
    }
    .h3 {
      margin-bottom: var(--spacing_7);
      margin-top: -1.6rem;
    }

    @media (min-width: 800px) {
      .h1 {
        margin-top: var(--spacing_10);
      }
      .container_single {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      .container {
        margin-right: var(--spacing_11);
        margin-top: var(--spacing_10);
      }

      .container img {
        max-width: 545px;
        min-width: 250px;
      }

      .test_grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      /*.column_picture {
        grid-column: 1 / 2;
      }

      .column_text {
        grid-column: 2 / 3;
      }*/
      .img_single {
        margin-top: var(--spacing_2);
        padding: var(--spacing_10);
      }
      .carousel .prev {
        left: 10%;
      }

      .carousel .next {
        right: 10%;
      }
      /*Ret pilene til her */
      .column_picture {
        height: 40vh;
        width: 35vw;
        /*Rem bruges her istedet - se evt. var */
      }
    }
  </style>

  <script>
    /*Chatgpt start */
    const prevButton = document.querySelector(".prev");
    const nextButton = document.querySelector(".next");

    prevButton.addEventListener("click", () => changeSlide(-1));
    nextButton.addEventListener("click", () => changeSlide(1));

    let slideIndex = 0;
    showSlide(slideIndex);

    function changeSlide(n) {
      showSlide((slideIndex += n));
    }

    function showSlide(n) {
      const slides = document.querySelectorAll(".carousel img");
      const totalSlides = slides.length;
      console.log(totalSlides);
      if (n >= totalSlides) {
        slideIndex = 0;
      }
      if (n < 0) {
        slideIndex = totalSlides - 1;
      }

      const carouselContainer = document.querySelector(".img_single");
      carouselContainer.style.transform = `translateX(${-slideIndex * 100}%)`;
    }
    /*Chat gpt slut */
  </script>
</article>
