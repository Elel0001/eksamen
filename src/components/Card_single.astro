---
import "../styles/general.css";
import Button from "./Button.astro";
import OverskriftWithUnderline from "../components/OverskriftWithUnderline.astro";

const { pris, texts1, texts2, texts3, texts4, imgsingle, imgsingle2 } = Astro.props;
---

<article>
  <div class="container_single">
    <div class="column_picture">
      <div class="carousel">
        <div class="img_single">
          <img src={imgsingle} alt="" />
          <img src={imgsingle2} alt="" />
        </div>
        <button class="prev"></button>
        <button class="next"></button>
      </div>
    </div>
    <div class="column_text">
      <div class="h1">
        <OverskriftWithUnderline overskrift="Lilla amatyst ring" />
      </div>

      <div class="h5">
        <h2>{pris}</h2>
      </div>

      <p>{texts1}</p>
      <p>{texts2}</p>
      <p>{texts3}</p>
      <p>{texts4}</p>
      <div class="botton_single">
        <Button size="large">Book en aftale</Button>
      </div>

      <div class="del">
        <div class="del_ikon">
          <img src="/icons/del_desk.svg" alt="Del knap" />
        </div>
        <p class="del_text">Del</p>
      </div>
    </div>
  </div>
  <style>
    /*Chatgpt start */
    .carousel {
      position: relative;
    }

    .carousel img {
      display: none;
      width: 100%;
      height: auto;
    }

    .carousel img:first-child {
      display: block;
    }

    .carousel .prev {
      left: 0;
    }

    .carousel .next {
      right: 0;
    }
    /*Chatgpt slut */
    .carousel button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-image: url("/icons/pilv.svg");
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
    }

    .botton_single {
      margin-bottom: var(--spacing_6);
    }
    .del_ikon {
      width: 80%;
      text-align: left;
    }
    .del {
      display: grid;
      grid-template-columns: 1fr 10fr;
      margin-left: -0.8rem;
      gap: var(--spacing_3);
    }

    .del_text {
      margin-top: var(--spacing_3);
    }
    p {
      margin-bottom: var(--spacing_4);
    }

    .h1 {
      margin-top: var(--spacing_4);
    }
    .h5 {
      margin-bottom: var(--spacing_7);
    }

    @media (min-width: 800px) {
      .h1 {
        margin-top: var(--spacing_10);
      }
      .container_single {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      .column_picture {
        grid-column: 1 / 2;
      }

      .column_text {
        grid-column: 2 / 3;
      }
      .img_single {
        margin-top: var(--spacing_2);
        padding: var(--spacing_10);
      }
      .prev,
      .next {
        padding: var(--spacing_10);
      }
    }
  </style>

  <script>
    /*Chatgpt start */
    const prevButton = document.querySelector(".prev");
    const nextButton = document.querySelector(".next");

    prevButton.addEventListener("click", () => changeSlide(-1));
    nextButton.addEventListener("click", () => changeSlide(1));

    let slideIndex = 0;
    showSlide(slideIndex);

    function changeSlide(n) {
      console.log("changeSlide function");
      showSlide((slideIndex += n));
    }

    function showSlide(n) {
      const slides = document.querySelectorAll<HTMLImageElement>(".carousel img");
      console.log(slides[0]);
      console.log(slides[1]);
      if (n >= slides.length) {
        slideIndex = 0;
      }
      if (n < 0) {
        slideIndex = slides.length - 1;
      }
      for (let i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";
      }
      slides[slideIndex].style.display = "block";
    }

    /*Chat gpt slut */
  </script>
</article>
